set EDstages Edwards Critical period / stage0, stage1, stage2, stage3, stage4, stage5/;

* data source: edwards aquifer authority
* location: EDSIMR/Water Market
Table EdwardsStageYear(years,EDstages, layer)
     stage0.J27head    stage2.J27head   stage3.J27head    stage4.J27head    stage5.J27head    stage0.J17head   stage1.J17head    stage2.J17head   stage3.J17head   stage4.J17head   stage5.J17head

1941        337                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1942        361                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1943        365                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1944        366                 0                 0                 0                 0            366                 0                  0                 0                 0                 0
1945        365                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1946        365                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1947        365                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1948        341                 0                 0                 0                 0            172                194                 0                 0                 0                 0
1949        313                 0                 0                 0                 0            210                155                 0                 0                 0                 0
1950        361                 0                 0                 0                 0            179                186                 0                 0                 0                 0
1951        250                 66                0                 0                 0              0                163                202                0                 0                 0
1952          0                 22                5                 2                 90             0                 0                 288               78                 0                 0
1953          0                 0                 0                 0                 365            0                19                 249               97                 0                 0
1954          0                 0                 0                 0                 365            0                15                 69                204                77                0
1955          0                 0                 0                 0                 365            0                 0                  0                126                239               0
1956          0                 0                 0                 0                 366            0                 0                  0                 0                 105              261
1957          0                 0                 0                 6                 359            0                51                 105               55                 146               8
1958        241                 63               38                 23                0            286                79                  0                 0                 0                 0
1959        365                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1960        363                 0                 0                 0                 0            362                 4                  0                 0                 0                 0
1961        352                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1962        365                 0                 0                 0                 0            229                108                 28                0                 0                 0
1963        365                 0                 0                 0                 0            100                 87                 127              51                 0                 0
1964        327                 19                0                 0                 0              0                180                 114              72                 0                 0
1965        365                 0                 0                 0                 0            172                155                 38                0                 0                 0
1966        365                 0                 0                 0                 0            164                163                 38                0                 0                 0
1967        360                 0                 0                 0                 0              0                161                 77               59                 68                0
1968        366                 0                 0                 0                 0            326                 40                 0                 0                 0                 0
1969        365                 0                 0                 0                 0            260                 77                 28                0                 0                 0
1970        365                 0                 0                 0                 0            295                 70                 0                 0                 0                 0
1971        365                 0                 0                 0                 0             97                113                 72               69                 14                0
1972        366                 0                 0                 0                 0            335                 31                 0                 0                 0                 0
1973        347                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1974        256                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1975        302                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1976        366                 0                 0                 0                 0            366                 0                  0                 0                 0                 0
1977        362                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1978        365                 0                 0                 0                 0            334                 31                 0                 0                 0                 0
1979        365                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1980        361                 0                 0                 0                 0            243                 72                 51                0                 0                 0
1981        343                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1982        365                 0                 0                 0                 0            250                 96                 19                0                 0                 0
1983        292                 0                 0                 0                 0            126                175                 64                0                 0                 0
1984        351                 0                 0                 0                 0              0                 86                 62                64                60                94
1985        360                 0                 0                 0                 0            158                155                 52                0                 0                 0
1986        342                 0                 0                 0                 0            266                 99                 0                 0                 0                 0
1987        333                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1988        366                 0                 0                 0                 0            177                189                 0                 0                 0                 0
1989        363                 0                 0                 0                 0             77                 56                 51                82                99                0
1990        365                 0                 0                 0                 0              0                108                 205               21                21                10
1991        365                 0                 0                 0                 0            85                 176                 104               0                 0                 0
1992        366                 0                 0                 0                 0            366                 0                  0                 0                 0                 0
1993        353                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
1994        221                 0                 0                 0                 0            302                 63                 0                 0                 0                 0
1995        355                 0                 0                 0                 0            264                101                 0                 0                 0                 0
1996        366                 0                 0                 0                 0             36                 76                 132              57                 65                 0
1997        365                 0                 0                 0                 0            266                 53                 46                0                 0                 0
1998        363                 0                 0                 0                 0            257                 31                 77                0                 0                 0
1999        365                 0                 0                 0                 0            335                 30                 0                 0                 0                 0
2000        366                 0                 0                 0                 0            146                110                 86               27                 0                 0
2001        365                 0                 0                 0                 0            328                 39                 0                 0                 0                 0
2002        362                 0                 0                 0                 0            344                 21                 0                 0                 0                 0
2003        365                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
2004        366                 0                 0                 0                 0            366                 0                  0                 0                 0                 0
2005        365                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
2006        365                 0                 0                 0                 0            214                124                 29                0                 0                 0
2007        365                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
2008        366                 0                 0                 0                 0            351                 15                 0                 0                 0                 0
2009        365                 0                 0                 0                 0            191                 81                 93                0                 0                 0
2010        365                 0                 0                 0                 0            365                 0                  0                 0                 0                 0
2011        178                 187               0                 0                 0            108                 74                 183               0                 0                 0
2012          0                 132              179                55                0             75                117                 161               13                0                 0
2013          0                 0                 0                 64                301            0                 91                 162               112               0                 0
2014          0                 0                 0                 0                 365            0                  0                 94                180               91                0
2015        147                 45                13                4                 156          113                 47                 179               26                0                 0
2016        366                 0                 0                 0                 0            366                  0                 0                 0                 0                 0
2017        365                 0                 0                 0                 0            303                 62                 0                 0                 0                 0
2018        343                 0                 0                 0                 0            224                 38                 80                0                 0                 0

   ;



alias(Edstages, Edstage);
parameter  EdwardsStage(states, EDstages, layer) ;

 EdwardsStage(states, EDstages, layer)
      $sum(Dates(states,years), EdwardsStageYear(Years, EDstages, layer)    )
    =  sum(Dates(states,years), EdwardsStageYear(Years, EDstages, layer)    )
      /sum((Dates(states,years),EDstage), EdwardsStageYear(Years, EDstage, layer)    )    ;

display   EdwardsStage;

Table Stagecutoff(EDstages, layer)  the regulated edwards aquifer cutoff
*source:EAA website

                  J17head     j27head
stage0             0             0
stage1             0.2           0
stage2             0.3           0.05
stage3             0.35          0.2
stage4             0.4           0.35
stage5             0.44          0.44

;

parameter EdwardsCutoff( layer, states) the expected cutoff of edwards permit by month and sons;
 EdwardsCutoff( layer, states)
      = sum(  EDstages,
              EdwardsStage(states,EDstages, layer)
              * Stagecutoff(EDstages, layer));

display  EdwardsCutoff;

set EdwardDryYearOption (years)  store the years (between 1934-2018) that edwards dry year option is executed (VOLUNTARY IRRIGATION SUSPENSION PROGRAM OPTION (VISPO))
/
2015
1990
1985
1957
1956
1955
/;


parameter DYOprob(states) the probability that the dry year option will be trigered under each state of nature ;

DYOprob(states)$sum(Dates(states,years), 1)= sum(Dates(states,years), 1$EdwardDryYearOption (years))/ sum(Dates(states,years), 1);

parameter DYOpayment(states)  the payment of dry year option;
  DYOpayment(states)$DYOprob(states)= 160;

